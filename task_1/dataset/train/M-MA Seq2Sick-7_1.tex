%Input
Let $x = (w_1, w_2, \dots, w_n)$ be the original input sequence, where each $w_i$ represents a token. The adversary aims to generate an adversarial example $x^*$ that leads to misclassification while ensuring minimal perturbation to the sequence.

Given:
- $f_{\theta}$: The target model with parameters $\theta$.
- $J(f_{\theta}(x), y)$: The loss function associated with the modelâ€™s prediction.
- $\mathcal{X}$: The valid input space.
- $M$: A set of candidate modifications for each token in $x$.

The attack iteratively modifies tokens in $x$ based on a scoring function to generate an adversarial sequence $x^*$.

%Output
The output of the **M-Seq2Sick-MetaAttack** is an adversarial sequence $x^*$ generated by modifying the original sequence $x$ based on the meta-perturbation score, ensuring misclassification while maintaining semantic coherence.


%Formula
1. Initialize the input sequence and true label:
   $
   (x, y).
   $
2. Define a set of candidate modifications $M$ for each token in the input sequence:
   $
   M = \{m_1, m_2, \ldots, m_n\},
   $
   where each $m_i$ represents a potential modification for the token $w_i$ in $x$.
3. For each token $w_i$ in the sequence:
   - For each modification $m_j \in M$:
     - Construct a modified sequence:
     $
     x' = (w_1, \ldots, w_{i-1}, m_j, w_{i+1}, \ldots, w_n).
     $
     - Evaluate the model's prediction:
     $
     \hat{y} = f_{\theta}(x').
     $
     - If $\hat{y} \neq y$, then $x'$ is a candidate adversarial example.
4. Compute a meta-perturbation score for each modification $m_j$ as follows:
   $
   s(m_j) = \sum_{i=1}^n p_i(y \neq f_\theta(x' + m_j))
   $
   where the sum is taken over all tokens $w_i$ in the sequence, and $p_i$ is the probability of the model incorrectly predicting the label for token $w_i$ when the modification $m_j$ is applied to it.
5. Select the modification $m^*$ with the highest meta-perturbation score:
   $
   m^* = \arg\max_{m_j} s(m_j)
   $
6. Apply the selected modification $m^*$ to the original input sequence $x$ to obtain the adversarial example $x'$.

%Explanation
The Meta-Adaptive Seq2Sick (MA-Seq2Sick) is a variant of the Seq2Sick attack that incorporates a meta-perturbation score to guide the selection of modifications. The meta-perturbation score takes into account not only the impact of each modification on individual tokens but also its overall effect on the model's predictions across the entire sequence. By using this scoring function, the M-Seq2Sick-MetaAttack can identify the most effective modifications and apply them to create more convincing adversarial examples. This variant is different from the main perturbation core in that it introduces a new dimension of optimization by considering the meta-perturbation scores when selecting modifications.